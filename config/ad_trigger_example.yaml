# 触发器配置示例
# 按照scenario_definitions.md中定义的最小场景层级组织配置，使用基于优先级和数据价值的数字ID

configId: "ad_trigger_example"
strategyId: 1003

strategies:
  # 左绕障变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200001
      priority: 4
      enabled: true
      # 表达式: 效率变道基础上，自车轨迹终点处于当前自车车道，绕障不变更灯
      triggerCondition: "efficiency_lane_change and ego_trajectory_end_in_current_lane and not changing_light_for_obstacle"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 右绕障变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200002
      priority: 4
      enabled: true
      # 表达式: 效率变道基础上，自车轨迹终点处于当前自车车道，绕障不变更灯
      triggerCondition: "efficiency_lane_change and ego_trajectory_end_in_current_lane and not changing_light_for_obstacle"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 左变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200011
      priority: 4
      enabled: true
      # 表达式: 存在左车道线 且 左车道线是可跨越车道线(虚线) 且 存在变道点 且 变道点x位置合适 且 轨迹终点小于车道线终点 且 不能跨多个车道线
      triggerCondition: "has_left_lane_line and left_lane_line_is_dashed and has_lane_change_point and lane_change_point_x_valid and trajectory_end_less_than_lane_end and not crossing_multiple_lanes"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 右变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200012
      priority: 4
      enabled: true
      # 表达式: 存在右车道线 且 右车道线是可跨越车道线(虚线) 且 存在变道点 且 变道点x位置合适 且 轨迹终点小于车道线终点 且 不能跨多个车道线
      triggerCondition: "has_right_lane_line and right_lane_line_is_dashed and has_lane_change_point and lane_change_point_x_valid and trajectory_end_less_than_lane_end and not crossing_multiple_lanes"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 左效率变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200021
      priority: 4
      enabled: true
      # 表达式: 左变道基础上，存在自车道的cipv 且 cipv小于未来自车最大速度
      triggerCondition: "left_lane_change and has_ego_lane_cipv and cipv_less_than_max_future_ego_speed"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 右效率变道场景
  - businessType: "LaneChange"
    trigger:
      triggerId: 200022
      priority: 4
      enabled: true
      # 表达式: 右变道基础上，存在自车道的cipv 且 cipv小于未来自车最大速度
      triggerCondition: "right_lane_change and has_ego_lane_cipv and cipv_less_than_max_future_ego_speed"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 无交互左转场景
  - businessType: "Turn"
    trigger:
      triggerId: 210001
      priority: 5
      enabled: true
      # 表达式: 处于路口状态 且 横摆角速度大于0.2rad 且 结尾帧yaw大于0.3rad 且 车道线末端和轨迹末端夹角大于15度 且 自车中点的yaw>0.1且与末端yaw反向
      triggerCondition: "at_intersection and yaw_rate > 0.2 and final_frame_yaw > 0.3 and lane_end_trajectory_end_angle > 15 and mid_ego_yaw_gt_01_and_opposite_final"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 无交互右转场景
  - businessType: "Turn"
    trigger:
      triggerId: 210002
      priority: 5
      enabled: true
      # 表达式: 处于路口状态 且 横摆角速度大于0.2rad 且 结尾帧yaw小于-0.3rad 且 车道线末端和轨迹末端夹角大于15度 且 自车中点的yaw>0.1且与末端yaw反向
      triggerCondition: "at_intersection and yaw_rate > 0.2 and final_frame_yaw < -0.3 and lane_end_trajectory_end_angle > 15 and mid_ego_yaw_gt_01_and_opposite_final"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 有交互左转场景
  - businessType: "Turn"
    trigger:
      triggerId: 210011
      priority: 5
      enabled: true
      # 表达式: 无交互左转基础上，增加交互判断：他车与自车未来轨迹点距离小于4m且自车时刻晚于他车不超过4s且存在交集且他车减速
      triggerCondition: "non_interactive_left_turn and other_vehicle_distance_lt_4m and ego_later_than_other_le_4s and polygon_intersection_exists and other_vehicle_decelerating"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
        - topic: "/perception/objects"
          type: "PerceptionObjects"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 有交互右转场景
  - businessType: "Turn"
    trigger:
      triggerId: 210012
      priority: 5
      enabled: true
      # 表达式: 无交互右转基础上，增加交互判断：他车与自车未来轨迹点距离小于4m且自车时刻晚于他车不超过4s且存在交集且他车减速
      triggerCondition: "non_interactive_right_turn and other_vehicle_distance_lt_4m and ego_later_than_other_le_4s and polygon_intersection_exists and other_vehicle_decelerating"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
        - topic: "/perception/objects"
          type: "PerceptionObjects"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 左转弯静止场景
  - businessType: "Turn"
    trigger:
      triggerId: 210021
      priority: 5
      enabled: true
      # 表达式: 左转基础上，速度小于0.01m/s
      triggerCondition: "left_turn and ego_speed_lt_001"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 右转弯静止场景
  - businessType: "Turn"
    trigger:
      triggerId: 210022
      priority: 5
      enabled: true
      # 表达式: 右转基础上，速度小于0.01m/s
      triggerCondition: "right_turn and ego_speed_lt_001"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 左转交互静止场景
  - businessType: "Turn"
    trigger:
      triggerId: 210031
      priority: 5
      enabled: true
      # 表达式: 左转交互基础上，速度小于0.01m/s
      triggerCondition: "interactive_left_turn and ego_speed_lt_001"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 右转交互静止场景
  - businessType: "Turn"
    trigger:
      triggerId: 210032
      priority: 5
      enabled: true
      # 表达式: 右转交互基础上，速度小于0.01m/s
      triggerCondition: "interactive_right_turn and ego_speed_lt_001"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 静止场景
  - businessType: "Standstill"
    trigger:
      triggerId: 400001
      priority: 6
      enabled: true
      # 表达式: 自车速度小于0.1m/s
      triggerCondition: "ego_speed_lt_01"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 90
        backwardCaptureDurationSec: 30
        cooldownDurationSec: 600
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "low"

  # 它车横穿交互场景
  - businessType: "Interaction"
    trigger:
      triggerId: 320001
      priority: 7
      enabled: true
      # 表达式: 满足交互条件且它车轨迹和自车轨迹最小距离小于4m且自车比它车后到交互点且不能后到太久且它车和自车bbx有交叠且它车heading和自车heading在17-162度之间
      triggerCondition: "interaction_conditions_met and min_trajectory_distance_lt_4m and ego_later_at_interaction_point and bboxes_overlap and heading_angle_between_17_162"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/perception/objects"
          type: "PerceptionObjects"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 它车急减速交互场景
  - businessType: "Interaction"
    trigger:
      triggerId: 320003
      priority: 7
      enabled: true
      # 表达式: 满足交互条件且它车存在急减速min_agent_hist_acc < -1
      triggerCondition: "interaction_conditions_met and min_agent_hist_acc_lt_neg1"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/perception/objects"
          type: "PerceptionObjects"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 偏离回正场景
  - businessType: "DeviationCorrection"
    trigger:
      triggerId: 330001
      priority: 8
      enabled: true
      # 表达式: 不能处于转弯/曲率弯道/路口场景 且 自车前3/8轨迹有压线趋势 且 自车后半段轨迹居中行驶
      triggerCondition: "not_turn_and_not_curve_and_not_intersection and front_3_8_trajectory_press_line_trend and latter_half_trajectory_centered"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 10
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 大曲率弯道车道保持场景
  - businessType: "HighCurvatureTurn"
    trigger:
      triggerId: 310001
      priority: 9
      enabled: true
      # 表达式: 自车速度大于5m/s 且 自车左右都存在车道线 且 自车未来轨迹在两条车道线之间 且 自车位于两条车道线内 且 车道线的c2,c3大于0.001 且 自车未来yaw大于0.02 且 自车不压线
      triggerCondition: "ego_speed_gt_5 and both_lane_lines_exist and future_trajectory_between_lanes and ego_between_lane_lines and lane_c2_c3_gt_0001 and future_yaw_gt_002 and not_pressing_line"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 刹车场景
  - businessType: "Deceleration"
    trigger:
      triggerId: 220001
      priority: 10
      enabled: true
      # 表达式: 转向稳定 且 自车不压线 且 自车加速度小于-0.15 且 存在交互他车
      triggerCondition: "steering_stable and not_pressing_line and ego_acceleration_lt_neg015 and interactive_other_vehicle_exists"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 8
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/perception/objects"
          type: "PerceptionObjects"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 刹停场景
  - businessType: "Deceleration"
    trigger:
      triggerId: 410001
      priority: 10
      enabled: true
      # 表达式: 转向稳定 且 自车不压线 且 固定时间轨迹中速度包含0.01m/s以下轨迹点
      triggerCondition: "steering_stable and not_pressing_line and trajectory_contains_speed_le_001"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 8
        backwardCaptureDurationSec: 5
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "high"

  # 加速场景
  - businessType: "Acceleration"
    trigger:
      triggerId: 220002
      priority: 10
      enabled: true
      # 表达式: 转向稳定 且 自车不压线 且 自车速度大于3m/s 且 最大加速度大于0.15
      triggerCondition: "steering_stable and not_pressing_line and ego_speed_gt_3 and max_acceleration_gt_015"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 8
        backwardCaptureDurationSec: 3
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 安全加速场景
  - businessType: "Acceleration"
    trigger:
      triggerId: 220003
      priority: 10
      enabled: true
      # 表达式: 无交互情况下 且 自车速度在3m/s~8m/s范围内 且 提速到10m/s以上
      triggerCondition: "no_interaction and ego_speed_3_to_8 and speed_up_to_gt_10"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 8
        backwardCaptureDurationSec: 3
        cooldownDurationSec: 30
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 普通车道保持场景
  - businessType: "LaneKeeping"
    trigger:
      triggerId: 300001
      priority: 11
      enabled: true
      # 表达式: 自车速度大于5m/s 且 自车左右都存在车道线 且 自车未来轨迹在两条车道线之间 且 自车位于两条车道线中间 且 自车不压线
      triggerCondition: "ego_speed_gt_5 and both_lane_lines_exist and future_trajectory_between_lanes and ego_at_lane_center and not_pressing_line"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 30
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "low"

  # 过路口车道保持场景
  - businessType: "LaneKeeping"
    trigger:
      triggerId: 300002
      priority: 11
      enabled: true
      # 表达式: 自车速度大于5m/s 且 自车在路口附近 且 自车未来一段时间的轨迹被夹在两段远处平行车道线之间
      triggerCondition: "ego_speed_gt_5 and near_intersection and future_trajectory_squeezed_by_parallel_lanes"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
        - topic: "/traffic/light"
          type: "TrafficLight"
          originalFrameRate: 5
          capturedFrameRate: 5
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 接近路口场景
  - businessType: "Intersection"
    trigger:
      triggerId: 360001
      priority: 12
      enabled: true
      # 表达式: 有红绿灯信号 且 固定时间轨迹和任意水平车道线保持1m以上距离 且 自车速度大于5m/s
      triggerCondition: "traffic_light_signal_present and trajectory_lane_distance_gt_1m and ego_speed_gt_5"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/traffic/light"
          type: "TrafficLight"
          originalFrameRate: 5
          capturedFrameRate: 5
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 分流场景
  - businessType: "MergeDiverge"
    trigger:
      triggerId: 340001
      priority: 13
      enabled: true
      # 表达式: 基于车道线几何关系判断的分流条件
      triggerCondition: "diverging_based_on_lane_geometry"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 合流场景
  - businessType: "MergeDiverge"
    trigger:
      triggerId: 340002
      priority: 13
      enabled: true
      # 表达式: 基于车道线几何关系判断的合流条件
      triggerCondition: "merging_based_on_lane_geometry"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 15
        backwardCaptureDurationSec: 10
        cooldownDurationSec: 60
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"

  # 环岛场景
  - businessType: "Roundabout"
    trigger:
      triggerId: 350001
      priority: 14
      enabled: true
      # 表达式: 自车靠近环岛
      triggerCondition: "near_roundabout"
    mode:
      triggerMode: 1
      cacheMode:
        forwardCaptureDurationSec: 20
        backwardCaptureDurationSec: 15
        cooldownDurationSec: 120
    enableMasking: false
    dds:
      channels:
        - topic: "/vehicle/status"
          type: "VehicleStatus"
          originalFrameRate: 100
          capturedFrameRate: 100
        - topic: "/lane/detection"
          type: "LaneDetection"
          originalFrameRate: 20
          capturedFrameRate: 20
        - topic: "/map/feature"
          type: "MapFeature"
          originalFrameRate: 1
          capturedFrameRate: 1
    cyber:
      channels: []
    upload:
      destination: "cloud"
      priority: "medium"